(()=>{"use strict";function t(t,e,n){let o=document.createElement(`${t}`);return o.className=`${e}`,o.innerHTML=`${n}`,o}const e=["C","D","E","F","G","A","B","Em","Am","Dm"];var n=[],o="",c=[];function r(){document.getElementById("content").innerHTML=""}const a=document.getElementById("content");function s(){document.body.style.backgroundImage="url(../src/assets/images/background.jpg)";let o=t("div","grid-container","");a.appendChild(o),function(){n=[];for(let o=0;o<e.length;o++){let c=t("button","grid-item",e[o]);n.push(c)}}(),n.forEach((t=>{o.appendChild(t),t.addEventListener("click",(function(){var e=new Audio;e.src=`../src/assets/sounds/${t.textContent}.wav`,e.addEventListener("canplaythrough",(function(){this.play()}))}))}))}function i(){document.body.style.backgroundImage="url(../src/assets/images/practice.png)",r(),function(){o="",c=[];let n=function(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}(e).slice(0,4);for(let e=0;e<n.length;e++){let o=t("button","",n[e]);c.push(o)}o=n[Math.floor(Math.random()*n.length)]}();let n=t("div","flex-container","");var s=new Audio;s.src=`../src/assets/sounds/${o}.wav`,s.addEventListener("canplaythrough",(function(){this.play()})),console.log(c);let d=t("div","flex-top",`<button id=${o} data-chord=${o}>Play Chord Again</button>\n      <button id="refresh">Refresh</button>\n    `);n.append(d);let l=t("div","results",""),u=t("div","flex-bottom","");n.appendChild(u),c.forEach((t=>{t.addEventListener("click",(function(){t.textContent===o?(l.textContent="Thats right!",setTimeout((()=>{i()}),1e3)):l.textContent="That's wrong! Try Again."})),u.appendChild(t),u.appendChild(l)})),a.appendChild(n),document.getElementById(o).addEventListener("click",(function(){var t=new Audio;t.src=`../src/assets/sounds/${o}.wav`,t.addEventListener("canplaythrough",(function(){this.play()}))})),document.getElementById("refresh").addEventListener("click",(function(){i()}))}const d=document.getElementById("home-btn"),l=document.getElementById("practice-btn"),u=document.getElementById("metronome-btn");var h,m;r(),s(),d.addEventListener("click",(()=>{r(),s()})),l.addEventListener("click",(()=>{r(),i()})),u.addEventListener("click",(()=>{r(),document.body.style.backgroundImage="url(../src/assets/images/metronome.jpg)"})),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&client_id=96fd8f0b535344928da701ea7025bcfa&client_secret=78aa06cc5c08438a900f68a07fde2170"}).then((function(t){return t.json()})).then((function(t){const e=t.access_token;return localStorage.setItem("access_token",e),e})).catch((function(t){console.error("Error getting access token:",t)})),function(t,e){const n=`https://api.spotify.com/v1/search?q=${encodeURIComponent("All Apologies")}&type=track`;fetch(n,{method:"GET",headers:{Authorization:`Bearer ${e}`}}).then((function(t){if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()})).then((function(t){console.log("Search Results:",t.tracks.items[0]),console.log("id: ",t.tracks.items[0].id),localStorage.setItem("song_id",t.tracks.items[0].id)})).catch((function(t){console.error("Error searching Spotify:",t)}))}(0,localStorage.getItem("access_token")),h=localStorage.getItem("song_id"),m=localStorage.getItem("access_token"),fetch(`https://api.spotify.com/v1/audio-analysis/${h}`,{method:"GET",headers:{Authorization:`Bearer ${m}`}}).then((function(t){if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()})).then((function(t){console.log(t),localStorage.setItem("tempo",Math.round(t.track.tempo)),localStorage.setItem("time_signature",t.track.time_signature)})).catch((function(t){console.error("Error searching Spotify:",t)}))})();