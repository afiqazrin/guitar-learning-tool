(()=>{"use strict";function t(t,e,n){let a=document.createElement(`${t}`);return a.className=`${e}`,a.innerHTML=`${n}`,a}const e=["C","D","E","F","G","A","B","Em","Am","Dm"];var n=[],a="",o=[];function s(){document.getElementById("content").innerHTML=""}const r=document.getElementById("content");function c(){document.body.style.backgroundImage="url(../src/assets/images/background.jpg)";let a=t("div","grid-container","");r.appendChild(a),function(){n=[];for(let a=0;a<e.length;a++){let o=t("button","grid-item",e[a]);n.push(o)}}(),n.forEach((t=>{a.appendChild(t),t.addEventListener("click",(function(){var e=new Audio;e.src=`../src/assets/sounds/${t.textContent}.wav`,e.addEventListener("canplaythrough",(function(){this.play()}))}))}))}function i(){document.body.style.backgroundImage="url(../src/assets/images/practice.png)",s(),function(){a="",o=[];let n=function(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}(e).slice(0,4);for(let e=0;e<n.length;e++){let a=t("button","",n[e]);o.push(a)}a=n[Math.floor(Math.random()*n.length)]}();let n=t("div","flex-container","");var c=new Audio;c.src=`../src/assets/sounds/${a}.wav`,c.addEventListener("canplaythrough",(function(){this.play()}));let d=t("div","flex-top",`<button id=${a} data-chord=${a}>Repeat Chord</button>\n      <button id="refresh">Refresh</button>\n    `);n.append(d);let l=t("div","results",""),u=t("div","flex-bottom","");n.appendChild(u),o.forEach((t=>{t.addEventListener("click",(function(){t.textContent===a?(l.classList.remove("wrong"),l.classList.add("correct"),l.textContent="Thats right!",setTimeout((()=>{i()}),1e3)):(l.classList.add("wrong"),l.classList.remove("correct"),l.textContent="That's wrong! Try Again.")})),u.appendChild(t),u.appendChild(l)})),r.appendChild(n),document.getElementById(a).addEventListener("click",(function(){var t=new Audio;t.src=`../src/assets/sounds/${a}.wav`,t.addEventListener("canplaythrough",(function(){this.play()}))})),document.getElementById("refresh").addEventListener("click",(function(){i()}))}function d(t){const e=t.currentTarget.dataset.songId,n=t.currentTarget.dataset.songName,a=t.currentTarget.dataset.songArtist,o=t.currentTarget.dataset.songImageUrl;console.log(`Clicked item with ID, Name, Arist, Image Url: ${e}, ${n}, ${a}, ${o}`),s()}function l(t){const e=document.querySelector(".autocomplete-results");if(""!=t.target.value&&8!=t.keyCode||""!=t.target.value&&8==t.keyCode){!function(t,e){const n=[],a=`https://api.spotify.com/v1/search?q=${encodeURIComponent(t)}&type=track`;fetch(a,{method:"GET",headers:{Authorization:`Bearer ${e}`}}).then((function(t){if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()})).then((function(t){for(let e=0;e<t.tracks.items.length;e++)n.push({id:t.tracks.items[e].id,name:t.tracks.items[e].name,artist:t.tracks.items[0].artists[0].name,image:t.tracks.items[e].album.images[0].url});localStorage.setItem("songsArray",JSON.stringify(n))})).catch((function(t){console.error("Error searching Spotify:",t)}))}(t.target.value,localStorage.getItem("access_token")),e.innerHTML="";const n=JSON.parse(localStorage.getItem("songsArray"))||[];for(let t=0;t<n.length;t++){const a=document.createElement("li");a.dataset.songName=n[t].name,a.dataset.songArtist=n[t].artist,a.dataset.songImageUrl=n[t].image,a.dataset.songId=n[t].id,a.innerHTML=`\n            <img src="${n[t].image}" alt="album image">\n            <div class="list-detail">\n                <div class="top">\n                    <h4>${n[t].name}</h4>\n                </div>\n                <div class="bottom">\n                    <h5>${n[t].artist}</h5>\n                </div>\n            </div>\n        `,a.addEventListener("click",d),e.appendChild(a)}}else(null==t.target.value||""==t.target.value&&8==t.keyCode)&&(e.innerHTML="")}const u=document.getElementById("home-btn"),m=document.getElementById("practice-btn"),g=document.getElementById("metronome-btn");s(),c(),u.addEventListener("click",(()=>{s(),c()})),m.addEventListener("click",(()=>{s(),function(){document.body.style.backgroundImage="url(../src/assets/images/practice.png)";let e=t("div","flex-container","");const n=t("button","start-practice-btn","START");n.addEventListener("click",i),e.appendChild(n),r.appendChild(e)}()})),g.addEventListener("click",(()=>{fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&client_id=96fd8f0b535344928da701ea7025bcfa&client_secret=78aa06cc5c08438a900f68a07fde2170"}).then((function(t){return t.json()})).then((function(t){const e=t.access_token;return localStorage.setItem("access_token",e),e})).catch((function(t){console.error("Error getting access token:",t)})),s(),function(){document.body.style.backgroundImage="url(../src/assets/images/metronome.jpg)",s();let e=t("div","search-container",""),n=document.createElement("input");n.setAttribute("type","text"),n.id="search-input",n.setAttribute("placeholder","Search for a song..."),n.setAttribute("autocomplete","off");let a=t("ul","autocomplete-results","");e.appendChild(n),e.appendChild(a),r.appendChild(e)}(),document.getElementById("search-input").addEventListener("keyup",l)}))})();