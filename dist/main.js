(()=>{"use strict";var e={573:(e,t,n)=>{function o(e){var t=document.getElementById("playbut_"+e);t.style.background="url('https://www.scales-chords.com/images/snd-mute-green-2.png') no-repeat",t.style.backgroundSize="100%",document.getElementById("music"+e).play()}function d(e){var t=document.getElementById("playbut_"+e);t.style.background="url('https://www.scales-chords.com/images/snd-play-green-2.png') no-repeat",t.style.backgroundSize="100%"}function s(){var e="https://www.scales-chords.com/api/scapi.1.3.php";if("undefined"!=typeof api_override_url&&(e=api_override_url),void 0===t)var t=!1;var n=document.getElementsByClassName("scales_chords_api"),o=1;t&&console.log(n);for(var d=0;d<n.length;d++){var s="",a=!0,i=n[d];i.id="scapiobjid"+o,o+=1;var c=n[d].attributes;t&&console.log(n[d]),t&&console.log(c),t&&console.log(c.length);for(let e=0;e<c.length;e++)t&&console.log(c[e]),t&&console.log("name: "+c[e].nodeName+" value: "+c[e].nodeValue),a?s="id="+i.id+"&":s+="&",a=!1,s+=encodeURI(c[e].nodeName)+"="+encodeURI(c[e].nodeValue);t&&alert(s),r(e,s,(function(e){var n=e.responseText.split("###RAWR###"),o=n[0];t?(document.getElementById(o).innerHTML="\x3c!--"+mystring+"--\x3e",n[2].length>0&&(document.getElementById(o).innerHTML+=n[2])):n[2].length>0&&(document.getElementById(o).innerHTML=n[2])}))}}function r(e,t,n,o,d,s){var r;(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4===r.readyState?200===r.status?n&&n(r):o&&o(r):d&&d(r)};var a="";if("string"==typeof t)a=t;else if(t&&"object"==typeof t){for(var i in t){var c=t[i];"string"==typeof c&&(c=encodeURIComponent(c)),a+="&"+i+"="+c}a.length>0&&(a=a.substring(1))}if(r.open("POST",e,!0),s){if(s.options)for(var l in s.options)l in r&&(r[l]=s.options[l]);if(s.headers)for(var m in s.headers)r.setRequestHeader(m,s.headers[m])}r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(a)}n.r(t),n.d(t,{audioStop:()=>d,playAudio3:()=>o,scales_chords_api_onload:()=>s}),window.addEventListener?window.addEventListener("load",s,!1):window.attachEvent("onload",s)}},t={};function n(o){var d=t[o];if(void 0!==d)return d.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{function e(e,t,n){let o=document.createElement(`${e}`);return o.className=`${t}`,o.innerHTML=`${n}`,o}const t={CChords:["C","Cm","Cdim","Caug","Cmaj7","C7","Cm7","Cdim7","Cm(maj7)","Cm7b5","Csus2","Csus4","C6","C6/9","C9","C11","C13","C5"],"C#Chords":["C#","C#m","C#dim","C#aug","C#maj7","C#7","C#m7","C#dim7","C#m(maj7)","C#m7b5","C#sus2","C#sus4","C#6","C#6/9","C#9","C#11","C#13","C#5"],DbChords:["Db","Dbm","Dbdim","Dbaug","Dbmaj7","Db7","Dbm7","Dbdim7","Dbm(maj7)","Dbm7b5","Dbsus2","Dbsus4","Db6","Db6/9","Db9","Db11","Db13","Db5"],DChords:["D","Dm","Ddim","Daug","Dmaj7","D7","Dm7","Ddim7","Dm(maj7)","Dm7b5","Dsus2","Dsus4","D6","D6/9","D9","D11","D13","D5"],"D#Chords":["D#","D#m","D#dim","D#aug","D#maj7","D#7","D#m7","D#dim7","D#m(maj7)","D#m7b5","D#sus2","D#sus4","D#6","D#6/9","D#9","D#11","D#13","D#5"],EbChords:["Eb","Ebm","Ebdim","Ebaug","Ebmaj7","Eb7","Ebm7","Ebdim7","Ebm(maj7)","Ebm7b5","Ebsus2","Ebsus4","Eb6","Eb6/9","Eb9","Eb11","Eb13","Eb5"],EChords:["E","Em","Edim","Eaug","Emaj7","E7","Em7","Edim7","Em(maj7)","Em7b5","Esus2","Esus4","E6","E6/9","E9","E11","E13","E5"],FChords:["F","Fm","Fdim","Faug","Fmaj7","F7","Fm7","Fdim7","Fm(maj7)","Fm7b5","Fsus2","Fsus4","F6","F6/9","F9","F11","F13","F5"],"F#Chords":["F#","F#m","F#dim","F#aug","F#maj7","F#7","F#m7","F#dim7","F#m(maj7)","F#m7b5","F#sus2","F#sus4","F#6","F#6/9","F#9","F#11","F#13","F#5"],GbChords:["Gb","Gbm","Gbdim","Gbaug","Gbmaj7","Gb7","Gbm7","Gbdim7","Gbm(maj7)","Gbm7b5","Gbsus2","Gbsus4","Gb6","Gb6/9","Gb9","Gb11","Gb13","Gb5"],GChords:["G","Gm","Gdim","Gaug","Gmaj7","G7","Gm7","Gdim7","Gm(maj7)","Gm7b5","Gsus2","Gsus4","G6","G6/9","G9","G11","G13","G5"],"G#Chords":["G#","G#m","G#dim","G#aug","G#maj7","G#7","G#m7","G#dim7","G#m(maj7)","G#m7b5","G#sus2","G#sus4","G#6","G#6/9","G#9","G#11","G#13","G#5"],AbChords:["Ab","Abm","Abdim","Abaug","Abmaj7","Ab7","Abm7","Abdim7","Abm(maj7)","Abm7b5","Absus2","Absus4","Ab6","Ab6/9","Ab9","Ab11","Ab13","Ab5"],AChords:["A","Am","Adim","Aaug","Amaj7","A7","Am7","Adim7","Am(maj7)","Am7b5","Asus2","Asus4","A6","A6/9","A9","A11","A13","A5"],"A#Chords":["A#","A#m","A#dim","A#aug","A#maj7","A#7","A#m7","A#dim7","A#m(maj7)","A#m7b5","A#sus2","A#sus4","A#6","A#6/9","A#9","A#11","A#13","A#5"],BbChords:["Bb","Bbm","Bbdim","Bbaug","Bbmaj7","Bb7","Bbm7","Bbdim7","Bbm(maj7)","Bbm7b5","Bbsus2","Bbsus4","Bb6","Bb6/9","Bb9","Bb11","Bb13","Bb5"],BChords:["B","Bm","Bdim","Baug","Bmaj7","B7","Bm7","Bdim7","Bm(maj7)","Bm7b5","Bsus2","Bsus4","B6","B6/9","B9","B11","B13","B5"]},o=["C Chords","C# Chords","Db Chords","D Chords","D# Chords","Eb Chords","E Chords","F Chords","F# Chords","Gb Chords","G Chords","G# Chords","Ab Chords","A Chords","A# Chords","Bb Chords","B Chords"];function d(){document.getElementById("content").innerHTML=""}async function s(e){const t=e.currentTarget.dataset.songId,n=e.currentTarget.dataset.songName,o=e.currentTarget.dataset.songArtist,s=e.currentTarget.dataset.songImageUrl;var r,a;await(r=t,a=localStorage.getItem("access_token"),new Promise(((e,t)=>{fetch(`https://api.spotify.com/v1/audio-features/${r}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((t=>{localStorage.setItem("tempo",Math.round(t.tempo)),localStorage.setItem("time_signature",t.time_signature),e(t)})).catch((e=>{console.error("Error searching Spotify:",e),t(e)}))}))),console.log("songSearch.js",localStorage.getItem("tempo")+" "+localStorage.getItem("time_signature")),d(),D(n,o,s,localStorage.getItem("tempo"),localStorage.getItem("time_signature"))}function r(e){const t=document.querySelector(".autocomplete-results");if(""!=e.target.value&&8!=e.keyCode||""!=e.target.value&&8==e.keyCode){!function(e,t){const n=[],o=`https://api.spotify.com/v1/search?q=${encodeURIComponent(e)}&type=track`;fetch(o,{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((function(e){if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((function(e){for(let t=0;t<e.tracks.items.length;t++)n.push({id:e.tracks.items[t].id,name:e.tracks.items[t].name,artist:e.tracks.items[0].artists[0].name,image:e.tracks.items[t].album.images[0].url});localStorage.setItem("songsArray",JSON.stringify(n))})).catch((function(e){console.error("Error searching Spotify:",e)}))}(e.target.value,localStorage.getItem("access_token")),t.innerHTML="";const n=JSON.parse(localStorage.getItem("songsArray"))||[];for(let e=0;e<n.length;e++){const o=document.createElement("li");o.dataset.songName=n[e].name,o.dataset.songArtist=n[e].artist,o.dataset.songImageUrl=n[e].image,o.dataset.songId=n[e].id,o.innerHTML=`\n            <img src="${n[e].image}" alt="album image">\n            <div class="list-detail">\n                <div class="top">\n                    <h4>${n[e].name}</h4>\n                </div>\n                <div class="bottom">\n                    <h5>${n[e].artist}</h5>\n                </div>\n            </div>\n        `,o.addEventListener("click",s),t.appendChild(o)}}else(null==e.target.value||""==e.target.value&&8==e.keyCode)&&(localStorage.removeItem("songsArray"),t.innerHTML="")}const a=new Audio("../src/assets/sounds/Synth_Block_A_hi.wav"),i=new Audio("../src/assets/sounds/Synth_Block_A_lo.wav");let c,l=0,m=!1;function u(){const e=document.querySelector(".tempo"),t=document.querySelector(".slider");let n=e.textContent;n<=20||(n--,e.textContent=n,t.value=n,window.clearInterval(c),c=window.setInterval((function(){C()}),6e4/n))}function p(){const e=document.querySelector(".tempo"),t=document.querySelector(".slider");let n=e.textContent;n>=280||(n++,e.textContent=n,t.value=n,window.clearInterval(c),c=window.setInterval((function(){C()}),6e4/n))}function h(){const e=document.querySelector(".tempo"),t=document.querySelector(".slider");let n=t.value;e.textContent=n,t.value=n,window.clearInterval(c),c=window.setInterval((function(){C()}),6e4/n)}function b(){const e=document.querySelector(".tempo"),t=(document.querySelector(".subtract-beats"),document.querySelector(".measure-count"));let n=t.textContent,o=e.textContent;n<=2||(n--,t.textContent=n,window.clearInterval(c),c=window.setInterval((function(){C()}),6e4/o))}function g(){const e=document.querySelector(".tempo"),t=(document.querySelector(".add-beats"),document.querySelector(".measure-count"));let n=t.textContent,o=e.textContent;n>=12||(n++,t.textContent=n,window.clearInterval(c),c=window.setInterval((function(){C()}),6e4/o))}function v(){const e=document.querySelector(".tempo");console.log(m);let t=e.textContent;console.log("bpm "+t),m?(window.clearInterval(c),l=0,console.log("stopping"),m=!1,this.textContent="START"):(c=window.setInterval((function(){C()}),6e4/t),m=!0,this.textContent="STOP")}function C(){console.log(l);let e=document.querySelector(".measure-count").textContent;console.log(e),l==e&&(l=0),0==l?(a.play(),a.currentTime=0):(i.play(),i.currentTime=0),l++}function y(){window.clearInterval(c),m=!1,l=0,d(),I(),document.getElementById("search-input").addEventListener("keyup",r)}var f=n(573);function E(){const t=document.getElementById("strum-slider"),n=document.querySelector(".beats-value"),o=document.querySelector(".strum-grid"),d=document.getElementById("num-strums"),s=document.querySelector(".strum-value");o.innerHTML="";const r=t.value;let a="";for(let e=1;e<=t.value;e++)a+=`${e}+`;const i=e("div","strum-beats",a);o.appendChild(i),n.textContent=r,d.setAttribute("max",2*t.value),d.value>t.value&&d.setAttribute("value",2*t.value),s.textContent=d.value,o.style.gridTemplateColumns=`repeat(${strumValuestrumSlider.value},2fr)`}function A(){const e=document.getElementById("num-strums");document.querySelector(".strum-value").textContent=e.value}const S=document.getElementById("content");let w=!1;function B(n){d();const o=function(e){const n=t[e];if(!n)return null;let o=n.slice().sort((()=>Math.random()-.5)).slice(0,4);return{correctChord:o[Math.floor(Math.random()*o.length)],otherChords:o}}(n.replace(/\s/g,""));console.log(o.correctChord),console.log(o.otherChords);const s=e("div","game-container","");s.style.visibility="hidden";const r=e("div","game-top",""),a=e("ins","scales_chords_api",""),i=e("div","play-chord-btn","");a.setAttribute("chord",o.correctChord),a.setAttribute("output","sound"),i.appendChild(a);const c=e("div","refresh-btn","Refresh"),l=e("div","game-bottom",""),m=e("div","selection-choice-grid",""),u=e("div","results-div","");r.appendChild(i),r.appendChild(c),s.appendChild(r),l.appendChild(m);for(let t=0;t<o.otherChords.length;t++){const d=e("div","choice-btn",`${o.otherChords[t]}`);m.appendChild(d),d.addEventListener("click",(()=>{d.textContent===o.correctChord?(u.classList.remove("wrong"),u.classList.add("correct"),u.textContent="That's right!",setTimeout((()=>{B(n)}),1500)):(u.classList.add("wrong"),u.classList.remove("correct"),u.textContent="That's wrong! Try again.")}))}c.addEventListener("click",(()=>{B(n)})),l.appendChild(u),s.appendChild(l),S.appendChild(s),(0,f.scales_chords_api_onload)(),setTimeout((()=>{s.style.visibility="visible";const e=document.getElementById("scapiobjid1"),t=e.querySelector("audio").id.replace("music","");e.querySelector(`#playbut_${t}`),i.onclick=function(){(0,f.playAudio3)(t)},(0,f.playAudio3)(t),e.querySelector("audio").onended=function(){(0,f.audioStop)(t)}}),1500)}function I(){d(),document.body.style.backgroundImage="url(../src/assets/images/metronome.jpg)",d();let t=e("div","search-container",""),n=e("div","left",""),o=e("div","right",""),s=e("span","or-span","OR"),r=e("div","standard-metronome","STANDARD METRONOME"),a=document.createElement("input");a.setAttribute("type","text"),a.id="search-input",a.setAttribute("placeholder","Search for a song..."),a.setAttribute("autocomplete","off");let i=e("ul","autocomplete-results","");n.appendChild(a),n.appendChild(i),o.append(r),t.appendChild(n),t.append(s),t.appendChild(o),S.appendChild(t),document.querySelector(".standard-metronome").addEventListener("click",(()=>{console.log("hello"),d(),D("Metronome","Standard","../src/assets/images/standard-metronome.png","140","4")}))}function D(t,n,o,d,s){const r=e("div","metronome-container",""),a=e("div","metronome",""),i=e("div","bpm-display",""),c=e("span","tempo",d),l=e("span","bpm","BPM"),m=e("div","song-details",""),C=document.createElement("img");C.src=o,C.alt="Song Album Cover";const f=e("div","tempo-text",`${t} - ${n}`),E=e("div","tempo-settings",""),A=e("div","adjust-tempo-btn decrease-tempo","-"),w=e("input","slider");w.type="range",w.min="20",w.max="280",w.step="1",w.value=d;const B=e("div","adjust-tempo-btn increase-tempo","+");w.addEventListener("input",h),A.addEventListener("click",u),B.addEventListener("click",p);const I=e("div","measures",""),D=e("div","subtract-beats stepper","-");D.addEventListener("click",b);const G=e("div","measure-count",s),k=e("div","add-beats stepper","+");k.addEventListener("click",g);const j=e("div","choice-div",""),L=e("div","start-stop","START");L.addEventListener("click",v);const T=e("div","select-song","EXIT");T.addEventListener("click",y),i.appendChild(c),i.appendChild(l),m.appendChild(C),m.appendChild(f),E.appendChild(A),E.appendChild(w),E.appendChild(B),I.appendChild(D),I.appendChild(G),I.appendChild(k),j.appendChild(L),j.appendChild(T),a.appendChild(i),a.appendChild(m),a.appendChild(E),a.appendChild(I),a.appendChild(j),r.appendChild(a),S.appendChild(r)}function G(){document.body.style.backgroundImage="url(../src/assets/images/background.jpg)";const t=e("div","home-container",""),n=e("div","home-header",'<div class="home-left"><div class="dropdown-btn">Chords</div><ul class="dropdown"></ul></div><div class="home-right"><div class="input-div"><input type="text" name="chord-input" id="chord-input" placeholder="Search for a chord..."><div class="search-icon"><i class="fa fa-search"></i></div></div></div>'),d=e("div","main-title",""),s=e("div","home-main","");t.appendChild(n),t.appendChild(d),t.appendChild(s),S.appendChild(t);for(let t=0;t<o.length;t++){const n=document.querySelector(".dropdown"),d=e("li","",`${o[t]}`);d.addEventListener("click",(()=>k(o[t]))),n.appendChild(d)}const r=document.querySelector(".dropdown-btn"),a=document.querySelector(".dropdown");r.addEventListener("click",(()=>{w=!w,a.style.display=w?"block":"none"}));const i=document.getElementById("chord-input");i.addEventListener("keydown",(function(e){"Enter"===e.key&&(j(i.value),i.value="")}))}function k(n){const o=document.querySelector(".dropdown"),d=document.querySelector(".main-title"),s=document.querySelector(".home-main");s.innerHTML="",d.textContent=n,w=!1,o.style.display="none",t[n.replace(/\s/g,"")].forEach((t=>{const n=e("button","chord-btn",t);n.dataset.chord=t,n.addEventListener("click",(()=>{j(t)})),s.appendChild(n)}))}function j(t){const n=e("div","chord-modal","");n.style.visibility="hidden",S.appendChild(n);const o=e("ins","scales_chords_api","");o.setAttribute("chord",t),o.setAttribute("output","image"),n.appendChild(o);const d=e("div","play-btn",""),s=e("ins","scales_chords_api","");s.setAttribute("chord",t),s.setAttribute("output","sound"),d.appendChild(s),n.appendChild(d);const r=e("div","modal-overlay","");S.appendChild(r),r.addEventListener("click",(function(e){n.contains(e.target)||(n.remove(),r.remove())})),(0,f.scales_chords_api_onload)(),setTimeout((()=>{n.style.visibility="visible";const e=document.getElementById("scapiobjid1"),t=document.getElementById("scapiobjid2"),o=e.querySelector("img");console.log(o.src);const d=t.querySelector("audio").id.replace("music","");t.querySelector(`#playbut_${d}`).onclick=function(){(0,f.playAudio3)(d)},t.querySelector("audio").onended=function(){(0,f.audioStop)(d)}}),1500)}const L=document.getElementById("home-btn"),T=document.getElementById("practice-btn"),_=document.getElementById("metronome-btn"),x=document.getElementById("chord-detect-btn"),q=document.getElementById("strum-btn");n(573),d(),G(),L.addEventListener("click",(()=>{d(),G()})),T.addEventListener("click",(()=>{d(),function(){document.body.style.backgroundImage="url(../src/assets/images/practice.png)",d();const t=e("div","practice-container",""),n=e("div","practice-title","Category Selection"),s=e("div","category-div",""),r=e("div","category-btn","Random Chords");t.appendChild(n),t.appendChild(s),S.appendChild(t);for(let t=0;t<o.length;t++){const n=e("div","category-btn",`${o[t]}`);s.appendChild(n),n.addEventListener("click",(()=>{B(n.textContent)}))}s.appendChild(r)}()})),_.addEventListener("click",(()=>{fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&client_id=96fd8f0b535344928da701ea7025bcfa&client_secret=78aa06cc5c08438a900f68a07fde2170"}).then((function(e){return e.json()})).then((function(e){const t=e.access_token;return localStorage.setItem("access_token",t),t})).catch((function(e){console.error("Error getting access token:",e)})),d(),I(),document.getElementById("search-input").addEventListener("keyup",r)})),x.addEventListener("click",(()=>{d(),function(){document.body.style.backgroundImage="url(../src/assets/images/youtube.jpg)";const t=e("div","youtube-container","<input type='text' name='youtube-search' autocomplete='off' id='search-input' placeholder='Search for a song from YouTube...'>");S.appendChild(t)}();const t=document.getElementById("search-input");t.addEventListener("keydown",(function(n){var o;"Enter"===n.key&&(o=t.value,fetch("http://127.0.0.1:5000/query_yt",{method:"POST",body:o}).then((function(e){return e.json()})).then((t=>{console.log("Chords:",t.chords),function(t,n){d();const o=e("div","youtube-container","<div class='yt-top'><div class='yt-title'>Current Chord:</div><div class='chord-name'></div></div>");S.appendChild(o);const s=new Blob([t],{type:"audio/mp3"}),r=URL.createObjectURL(s),a=new Audio(r);a.class="yt-audio",a.controls=!0,o.appendChild(a),a.addEventListener("timeupdate",(function(){const e=a.currentTime,t=document.querySelector(".chord-name");if(t){const o=n.find((t=>e>=t[1]&&e<t[1]+1));void 0!==o&&"N"!==o[0]?t.textContent=o[0]+" chord":o&&"N"===o[0]&&(t.textContent="No chord detected")}})),a.play()}(Uint8Array.from(atob(t.audio_data),(e=>e.charCodeAt(0))),t.chords)})).catch((function(e){console.error("Error:",e)})),t.value="",d(),document.getElementById("content").innerHTML="<div class='main-title'>Loading...</div>")}))})),q.addEventListener("click",(()=>{d(),function(){d();const t=e("div","strum-container",""),n=e("div","strum-top","<div class='strum-title'>Strumming Pattern</div><form action='' class='strum-form'><label for='strum-slider'>Number of beats: </label><span class='beats-value'>8</span><input type='range'name='strum-slider'id='strum-slider'min='2'max='8' value='8'/></form><form action='' class='strum-form'><label for='num-strums'>Number of strums: </label><span class='strum-value'>16</span><input type='range'name='num-strums'id='num-strums'min='2'max='16' value='16'/></form>"),o=e("div","strum-bottom","<div class='strum-grid'><div class='strum-beats'>1+2+3+4+<br>↑↓↑↓↑↓</div></div><div class='strum-btn'>Random</div></div>");t.appendChild(n),t.appendChild(o),S.appendChild(t);const s=document.getElementById("strum-slider"),r=document.getElementById("num-strums");s.addEventListener("input",E),r.addEventListener("input",A)}()}))})()})();