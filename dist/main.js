(()=>{"use strict";function t(t,e,n){let a=document.createElement(`${t}`);return a.className=`${e}`,a.innerHTML=`${n}`,a}function e(){document.getElementById("content").innerHTML=""}const n=document.getElementById("content");function a(t){const n=t.currentTarget.dataset.songId,a=t.currentTarget.dataset.songName,r=t.currentTarget.dataset.songArtist,o=t.currentTarget.dataset.songImageUrl;console.log(`Clicked item with ID, Name, Arist, Image Url: ${n}, ${a}, ${r}, ${o}`),e()}function r(t){const e=document.querySelector(".autocomplete-results");if(null!=t.target.value&&8!=t.keyCode||null!=t.target.value&&8==t.keyCode){!function(t,e){const n=[],a=`https://api.spotify.com/v1/search?q=${encodeURIComponent(t)}&type=track`;fetch(a,{method:"GET",headers:{Authorization:`Bearer ${e}`}}).then((function(t){if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()})).then((function(t){for(let e=0;e<t.tracks.items.length;e++)n.push({id:t.tracks.items[e].id,name:t.tracks.items[e].name,artist:t.tracks.items[0].artists[0].name,image:t.tracks.items[e].album.images[0].url});localStorage.setItem("songsArray",JSON.stringify(n))})).catch((function(t){console.error("Error searching Spotify:",t)}))}(t.target.value,localStorage.getItem("access_token")),e.innerHTML="";const n=JSON.parse(localStorage.getItem("songsArray"))||[];for(let t=0;t<n.length;t++){const r=document.createElement("li");r.dataset.songName=n[t].name,r.dataset.songArtist=n[t].artist,r.dataset.songImageUrl=n[t].image,r.dataset.songId=n[t].id,r.innerHTML=`\n            <img src="${n[t].image}" alt="album image">\n            <div class="list-detail">\n                <div class="top">\n                    <h4>${n[t].name}</h4>\n                </div>\n                <div class="bottom">\n                    <h5>${n[t].artist}</h5>\n                </div>\n            </div>\n        `,r.addEventListener("click",a),e.appendChild(r)}}}document.getElementById("metronome-btn").addEventListener("click",(()=>{fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&client_id=96fd8f0b535344928da701ea7025bcfa&client_secret=78aa06cc5c08438a900f68a07fde2170"}).then((function(t){return t.json()})).then((function(t){const e=t.access_token;return localStorage.setItem("access_token",e),e})).catch((function(t){console.error("Error getting access token:",t)})),e(),function(){document.body.style.backgroundImage="url(../src/assets/images/metronome.jpg)",e();let a=t("div","search-container",""),r=document.createElement("input");r.setAttribute("type","text"),r.id="search-input",r.setAttribute("placeholder","Search for a song..."),r.setAttribute("autocomplete","off");let o=t("ul","autocomplete-results","");a.appendChild(r),a.appendChild(o),n.appendChild(a)}(),document.getElementById("search-input").addEventListener("keyup",r)}))})();